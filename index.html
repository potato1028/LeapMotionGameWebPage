<!DOCTYPE html>
<html lang="ko" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI ììœ¨ ì§„í–‰ TRPG ì‹œìŠ¤í…œ - í¬íŠ¸í´ë¦¬ì˜¤</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; }
        .code-preview { font-family: 'Consolas', 'Monaco', monospace; }
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1a202c; }
        ::-webkit-scrollbar-thumb { background: #4a5568; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #718096; }
    </style>
</head>
<body class="bg-gray-900 text-gray-100 antialiased selection:bg-indigo-500 selection:text-white">

    <!-- Navigation -->
    <nav class="fixed w-full z-50 bg-gray-900/90 backdrop-blur-md border-b border-gray-800">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <span class="text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-indigo-400 to-cyan-400">
                        AI TRPG Project
                    </span>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#home" class="hover:bg-gray-800 px-3 py-2 rounded-md text-sm font-medium transition">í™ˆ</a>
                        <a href="#about" class="hover:bg-gray-800 px-3 py-2 rounded-md text-sm font-medium transition">ì†Œê°œ</a>
                        <a href="#architecture" class="hover:bg-gray-800 px-3 py-2 rounded-md text-sm font-medium transition">ì•„í‚¤í…ì²˜</a>
                        <a href="#gameplay" class="hover:bg-gray-800 px-3 py-2 rounded-md text-sm font-medium transition">í”Œë ˆì´ ì‹œì—°</a>
                        <a href="#code" class="hover:bg-gray-800 px-3 py-2 rounded-md text-sm font-medium transition">ë°ëª¨ ë‹¤ìš´ë¡œë“œ</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="relative pt-32 pb-20 lg:pt-48 lg:pb-32 overflow-hidden">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10 text-center">
            <div class="inline-flex items-center px-3 py-1 rounded-full border border-indigo-500/30 bg-indigo-500/10 text-indigo-300 text-xs font-medium mb-6">
                <span class="flex w-2 h-2 bg-indigo-400 rounded-full mr-2 animate-pulse"></span>
                Project Release v1.0
            </div>
            <h1 class="text-4xl sm:text-6xl font-black tracking-tight mb-6">
                <span class="block text-gray-100">GM ì—†ëŠ” TRPGëŠ” ê°€ëŠ¥í•˜ë‹¤</span>
                <span class="block bg-clip-text text-transparent bg-gradient-to-r from-indigo-400 via-purple-400 to-cyan-400 mt-2">
                    AI ê¸°ë°˜ ììœ¨ ì§„í–‰ ì‹œìŠ¤í…œ
                </span>
            </h1>
            <p class="mt-4 text-xl text-gray-400 max-w-2xl mx-auto">
                ìƒì„±í˜• AI(GPT-4o)ì˜ ìƒìƒë ¥ê³¼ Python ê·œì¹™ ì—”ì§„ì˜ ê³µì •ì„±ì„ ê²°í•©í•˜ì—¬,<br>
                í…Œë§ˆë§Œ ì…ë ¥í•˜ë©´ ë¬´í•œí•œ ëª¨í—˜ì´ í¼ì³ì§€ëŠ” í•˜ì´ë¸Œë¦¬ë“œ ê²Œì„ í”Œë«í¼ì…ë‹ˆë‹¤.
            </p>
            <div class="mt-10 flex justify-center gap-4">
                <a href="#gameplay" class="px-8 py-3 rounded-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold transition transform hover:scale-105 shadow-lg shadow-indigo-500/30 flex items-center">
                    <i data-lucide="play-circle" class="w-5 h-5 mr-2"></i>
                    ì‹œì—° ì˜ìƒ ë³´ê¸°
                </a>
                <a href="#code" class="px-8 py-3 rounded-full bg-gray-800 hover:bg-gray-700 text-gray-300 font-bold transition border border-gray-700 flex items-center">
                    <i data-lucide="terminal" class="w-5 h-5 mr-2"></i>
                    ë°ëª¨ ì‹¤í–‰í•˜ê¸°
                </a>
            </div>
        </div>
        <!-- Background Elements -->
        <div class="absolute top-0 left-1/2 w-full -translate-x-1/2 h-full z-0 opacity-20 pointer-events-none">
            <div class="absolute top-20 left-20 w-72 h-72 bg-purple-500 rounded-full mix-blend-multiply filter blur-3xl animate-blob"></div>
            <div class="absolute top-20 right-20 w-72 h-72 bg-cyan-500 rounded-full mix-blend-multiply filter blur-3xl animate-blob animation-delay-2000"></div>
            <div class="absolute -bottom-8 left-1/2 w-72 h-72 bg-indigo-500 rounded-full mix-blend-multiply filter blur-3xl animate-blob animation-delay-4000"></div>
        </div>
    </section>

    <!-- Project Overview -->
    <section id="about" class="py-20 bg-gray-800">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-3xl font-bold text-white">í”„ë¡œì íŠ¸ í•µì‹¬ ê°€ì¹˜</h2>
                <p class="mt-4 text-gray-400">ê¸°ì¡´ TRPGì˜ ì§„ì… ì¥ë²½ì„ ê¸°ìˆ ì ìœ¼ë¡œ í•´ê²°í–ˆìŠµë‹ˆë‹¤.</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <!-- Feature 1 -->
                <div class="bg-gray-900 p-8 rounded-2xl border border-gray-700 hover:border-indigo-500 transition duration-300">
                    <div class="w-12 h-12 bg-indigo-900/50 rounded-lg flex items-center justify-center mb-6 text-indigo-400">
                        <i data-lucide="brain-circuit" class="w-6 h-6"></i>
                    </div>
                    <h3 class="text-xl font-bold text-white mb-3">ì§€ëŠ¥í˜• AI GM</h3>
                    <p class="text-gray-400 leading-relaxed">
                        GPT-4oê°€ í”Œë ˆì´ì–´ì˜ ì˜ë„ë¥¼ íŒŒì•…í•˜ê³  ì‹¤ì‹œê°„ìœ¼ë¡œ ì„œì‚¬ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ì •í•´ì§„ ìŠ¤í¬ë¦½íŠ¸ê°€ ì•„ë‹Œ, ë§¤ë²ˆ ìƒˆë¡œìš´ ìŠ¤í† ë¦¬ë¥¼ ê²½í—˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                    </p>
                </div>
                <!-- Feature 2 -->
                <div class="bg-gray-900 p-8 rounded-2xl border border-gray-700 hover:border-purple-500 transition duration-300">
                    <div class="w-12 h-12 bg-purple-900/50 rounded-lg flex items-center justify-center mb-6 text-purple-400">
                        <i data-lucide="scale" class="w-6 h-6"></i>
                    </div>
                    <h3 class="text-xl font-bold text-white mb-3">ë°ì´í„° ê¸°ë°˜ ê³µì •ì„±</h3>
                    <p class="text-gray-400 leading-relaxed">
                        AIì˜ ìì˜ì  íŒë‹¨ì„ ë°°ì œí•˜ê³ , Python ì—”ì§„ì´ ê´€ë¦¬í•˜ëŠ” ìŠ¤íƒ¯ê³¼ ì£¼ì‚¬ìœ„ í™•ë¥ ì— ë”°ë¼ ìŠ¹íŒ¨ê°€ ê²°ì •ë˜ëŠ” íˆ¬ëª…í•œ ê·œì¹™ ì‹œìŠ¤í…œì„ ì ìš©í–ˆìŠµë‹ˆë‹¤.
                    </p>
                </div>
                <!-- Feature 3 -->
                <div class="bg-gray-900 p-8 rounded-2xl border border-gray-700 hover:border-cyan-500 transition duration-300">
                    <div class="w-12 h-12 bg-cyan-900/50 rounded-lg flex items-center justify-center mb-6 text-cyan-400">
                        <i data-lucide="infinity" class="w-6 h-6"></i>
                    </div>
                    <h3 class="text-xl font-bold text-white mb-3">ì¥ë¥´ì˜ ë¬´í•œ í™•ì¥</h3>
                    <p class="text-gray-400 leading-relaxed">
                        íŒíƒ€ì§€, SF, í˜¸ëŸ¬ ë“± í…Œë§ˆ ì œì•½ì´ ì—†ìŠµë‹ˆë‹¤. í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ì„ í†µí•´ ì–´ë–¤ ì„¸ê³„ê´€ì´ë“  ì¦‰ì‹œ ìƒì„±í•˜ê³  í”Œë ˆì´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Technical Architecture -->
    <section id="architecture" class="py-20 bg-gray-900">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
                <div>
                    <h2 class="text-3xl font-bold text-white mb-6">í•˜ì´ë¸Œë¦¬ë“œ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜</h2>
                    <p class="text-gray-400 mb-8 leading-relaxed">
                        ê° ê¸°ìˆ ì˜ ì¥ì ì„ ê·¹ëŒ€í™”í•˜ê¸° ìœ„í•´ ì—­í• ì„ ëª…í™•íˆ ë¶„ë¦¬í–ˆìŠµë‹ˆë‹¤. UnityëŠ” ì‚¬ìš©ì ê²½í—˜ì„, Pythonì€ ê²Œì„ì˜ ë¡œì§ì„, GPT-4oëŠ” ì°½ì˜ë ¥ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.
                    </p>
                    
                    <ul class="space-y-6">
                        <li class="flex items-start">
                            <div class="flex-shrink-0 w-8 h-8 rounded-full bg-green-900/50 flex items-center justify-center text-green-400 mt-1">1</div>
                            <div class="ml-4">
                                <h4 class="text-lg font-bold text-white">Unity Client (Frontend)</h4>
                                <p class="text-gray-400 text-sm">ì±„íŒ… ì¸í„°í˜ì´ìŠ¤, ì‹¤ì‹œê°„ ìŠ¤íƒ¯ UI, ë¹„ë™ê¸° ì„œë²„ í†µì‹  ë‹´ë‹¹.</p>
                            </div>
                        </li>
                        <li class="flex items-start">
                            <div class="flex-shrink-0 w-8 h-8 rounded-full bg-blue-900/50 flex items-center justify-center text-blue-400 mt-1">2</div>
                            <div class="ml-4">
                                <h4 class="text-lg font-bold text-white">Python API Server (Backend Logic)</h4>
                                <p class="text-gray-400 text-sm">HP, ì¸ë²¤í† ë¦¬, ì£¼ì‚¬ìœ„ êµ´ë¦¼ ë“± 'ê²Œì„ì˜ ì§„ì‹¤(Ground Truth)' ê´€ë¦¬.</p>
                            </div>
                        </li>
                        <li class="flex items-start">
                            <div class="flex-shrink-0 w-8 h-8 rounded-full bg-orange-900/50 flex items-center justify-center text-orange-400 mt-1">3</div>
                            <div class="ml-4">
                                <h4 class="text-lg font-bold text-white">AI Tool Calling (Core Tech)</h4>
                                <p class="text-gray-400 text-sm">AIê°€ í…ìŠ¤íŠ¸ ìƒì„± ì¤‘ í•¨ìˆ˜(`roll_check`)ë¥¼ ìŠ¤ìŠ¤ë¡œ í˜¸ì¶œí•˜ì—¬ 'í™˜ê°' ë°©ì§€ ë° ë…¼ë¦¬ì  ê²Œì„ ì§„í–‰.</p>
                            </div>
                        </li>
                    </ul>
                </div>
                
                <!-- Diagram Visual -->
                <div class="bg-gray-800 rounded-2xl p-8 border border-gray-700 shadow-2xl relative">
                    <div class="absolute top-4 right-4 flex space-x-2">
                        <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                        <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                        <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                    </div>
                    <div class="mt-4 flex flex-col items-center space-y-4">
                        <!-- Unity Box -->
                        <div class="w-full bg-gray-700 p-4 rounded-lg text-center border border-green-500/30">
                            <span class="text-green-400 font-bold block mb-1">Unity Client</span>
                            <span class="text-xs text-gray-400">Player Input / UI Rendering</span>
                        </div>
                        <i data-lucide="arrow-down-up" class="text-gray-500"></i>
                        <!-- Python Box -->
                        <div class="w-full bg-gray-700 p-4 rounded-lg text-center border border-blue-500/30">
                            <span class="text-blue-400 font-bold block mb-1">Python FastAPI Server</span>
                            <span class="text-xs text-gray-400">Game State / Rules Engine</span>
                        </div>
                        <i data-lucide="arrow-down-up" class="text-gray-500"></i>
                        <!-- OpenAI Box -->
                        <div class="w-full bg-gray-700 p-4 rounded-lg text-center border border-orange-500/30">
                            <span class="text-orange-400 font-bold block mb-1">OpenAI (GPT-4o)</span>
                            <span class="text-xs text-gray-400">Narrative Generation / Tool Calling</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Gameplay Showcase -->
    <section id="gameplay" class="py-20 bg-gray-800 border-y border-gray-700">
        <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <span class="text-indigo-400 font-semibold tracking-wider uppercase text-sm">Demo Video & Logs</span>
                <h2 class="text-3xl font-bold text-white mt-2">ì‹¤ì œ í”Œë ˆì´ ì‹œì—°</h2>
                <p class="text-gray-400 mt-2">ì‚¬ì´ë²„í‘í¬ í•´ê²°ì‚¬ 'ê°ì'ì˜ ëª¨í—˜ì„ ì˜ìƒìœ¼ë¡œ í™•ì¸í•˜ì„¸ìš”.</p>
            </div>

            <!-- Video Embed -->
            <div class="aspect-video w-full rounded-2xl overflow-hidden shadow-2xl border border-gray-700 mb-16 bg-black">
                <iframe class="w-full h-full" 
                        src="https://www.youtube.com/embed/eZriC12OqI0?rel=0" 
                        title="AI TRPG Gameplay Demo" 
                        frameborder="0" 
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                        allowfullscreen>
                </iframe>
            </div>

            <div class="text-center mb-8">
                <h3 class="text-2xl font-bold text-white">í”Œë ˆì´ ë¡œê·¸ ìš”ì•½</h3>
                <p class="text-gray-400 text-sm mt-2">ì˜ìƒì— í¬í•¨ëœ ì£¼ìš” ìƒí˜¸ì‘ìš© ë‚´ì—­ì…ë‹ˆë‹¤.</p>
            </div>

            <div class="space-y-6">
                <!-- Log Item 1 -->
                <div class="flex gap-4">
                    <div class="flex-shrink-0 w-12 h-12 rounded-full bg-gray-700 flex items-center justify-center border border-gray-600">
                        <i data-lucide="user" class="text-gray-300"></i>
                    </div>
                    <div class="bg-gray-900 rounded-r-xl rounded-bl-xl p-5 flex-1 border border-gray-700">
                        <div class="text-xs text-gray-500 mb-1">Player (ê°ì)</div>
                        <p class="text-gray-200">"í™˜í’êµ¬ë¥¼ í†µí•´ ê±´ë¬¼ ë‚´ë¶€ë¡œ ì ì…í•´ì„œ, ë³´ì•ˆ í„°ë¯¸ë„ì„ í•´í‚¹í•´ ë‚´ë¶€ ì§€ë„ë¥¼ ì–»ê² ë‹¤."</p>
                    </div>
                </div>

                <!-- Log Item 2 (System) -->
                <div class="flex gap-4 justify-center">
                    <div class="bg-indigo-900/30 rounded-lg px-6 py-2 border border-indigo-500/30">
                        <p class="text-indigo-300 text-sm font-mono flex items-center gap-2">
                            <i data-lucide="cpu" class="w-4 h-4"></i>
                            [System] ê¸°ìˆ (Tech) íŒì • ìš”ì²­... ì£¼ì‚¬ìœ„ êµ´ë¦¼(18) + ë³´ì •ì¹˜(4) = <span class="font-bold text-green-400">22 (ì„±ê³µ)</span>
                        </p>
                    </div>
                </div>

                <!-- Log Item 3 (GM) -->
                <div class="flex gap-4 flex-row-reverse">
                    <div class="flex-shrink-0 w-12 h-12 rounded-full bg-indigo-900 flex items-center justify-center border border-indigo-700">
                        <i data-lucide="bot" class="text-indigo-300"></i>
                    </div>
                    <div class="bg-indigo-900/20 rounded-l-xl rounded-br-xl p-5 flex-1 border border-indigo-800">
                        <div class="text-xs text-indigo-400 mb-1 text-right">Game Master (AI)</div>
                        <p class="text-gray-200">
                            ë‹¹ì‹ ì˜ ì†ë†€ë¦¼ì€ ë¹›ì²˜ëŸ¼ ë¹¨ëìŠµë‹ˆë‹¤. ë³´ì•ˆ ì‹œìŠ¤í…œì€ ë‹¹ì‹ ì˜ ì¹¨ì…ì„ ì „í˜€ ëˆˆì¹˜ì±„ì§€ ëª»í–ˆê³ , í™”ë©´ì—ëŠ” ê±´ë¬¼ì˜ ìƒì„¸ êµ¬ì¡°ë„ì™€ ë¹„ë°€ ì—°êµ¬ì†Œì˜ ìœ„ì¹˜ê°€ ë¶‰ì€ ì ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤. í•˜ì§€ë§Œ ë³µë„ ëì—ì„œ ê²½ë¹„ ë“œë¡ ì˜ ì†Œë¦¬ê°€ ë“¤ë ¤ì˜µë‹ˆë‹¤. ì–´ë–»ê²Œ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Code Download Section -->
    <section id="code" class="py-20 bg-gray-900">
        <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between mb-8">
                <div>
                    <h2 class="text-3xl font-bold text-white">ë°ëª¨ ì‹¤í–‰í•´ë³´ê¸°</h2>
                    <p class="text-gray-400 mt-2">API Keyë§Œ ì…ë ¥í•˜ë©´ í„°ë¯¸ë„ì—ì„œ ë°”ë¡œ ì‹¤í–‰ ê°€ëŠ¥í•œ Python ë…ë¦½ ë²„ì „ì…ë‹ˆë‹¤.</p>
                </div>
                <button onclick="downloadCode('terminal_rpg.py', 'code-python')" class="flex items-center px-5 py-2.5 bg-blue-600 hover:bg-blue-500 text-white font-bold rounded-lg transition shadow-lg animate-bounce">
                    <i data-lucide="download" class="w-5 h-5 mr-2"></i>
                    terminal_rpg.py ë‹¤ìš´ë¡œë“œ
                </button>
            </div>
            
            <div class="bg-gray-800 rounded-xl border border-gray-700 overflow-hidden shadow-2xl">
                <div class="bg-gray-900 px-4 py-3 border-b border-gray-700 flex items-center gap-2">
                    <div class="flex gap-1.5">
                        <div class="w-3 h-3 rounded-full bg-red-500"></div>
                        <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                        <div class="w-3 h-3 rounded-full bg-green-500"></div>
                    </div>
                    <span class="ml-2 text-sm font-mono text-gray-400">terminal_rpg.py</span>
                </div>
                <div class="p-6 overflow-x-auto bg-gray-900/50">
<pre class="code-preview text-sm text-gray-300 whitespace-pre"><code id="code-python">import os
import json
import random
import sys

# 1. OpenAI ë¼ì´ë¸ŒëŸ¬ë¦¬ í™•ì¸
try:
    import openai
except ImportError:
    print("âŒ 'openai' ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.")
    print("í„°ë¯¸ë„ì—ì„œ 'pip install openai'ë¥¼ ì‹¤í–‰í•´ì£¼ì„¸ìš”.")
    sys.exit(1)

# 2. ê²Œì„ ì—”ì§„ (ì£¼ì‚¬ìœ„ íŒì • ë¡œì§)
class RulesEngine:
    def __init__(self, char_stats):
        self.stats = char_stats
    
    def roll_check(self, stat_name, difficulty_check):
        print(f"\n[SYSTEM] ğŸ² '{stat_name}' íŒì • ì¤‘... (ë‚œì´ë„: {difficulty_check})")
        
        # ë³´ì •ì¹˜ ê³„ì‚° (ê°„ë‹¨í•˜ê²Œ)
        stat_val = self.stats.get(stat_name, 10)
        modifier = (stat_val - 10) // 2
        
        # ì£¼ì‚¬ìœ„ êµ´ë¦¼ (Advantage: 2ë²ˆ êµ´ë ¤ ë†’ì€ ê°’)
        roll = max(random.randint(1, 20), random.randint(1, 20))
        
        # íˆë“  ë³´ë„ˆìŠ¤ (+3) - í”Œë ˆì´ì–´ ê¸°ë¶„ ì¢‹ê²Œ í•˜ê¸° ìœ„í•¨
        total = roll + modifier + 3
        
        is_success = total >= difficulty_check
        result = "ì„±ê³µ! ğŸ‰" if is_success else "ì‹¤íŒ¨... ğŸ’€"
        
        print(f"   ã„´ ì£¼ì‚¬ìœ„: {roll} + ë³´ì •: {modifier} + íˆë“ : 3 = ì´í•©: {total}")
        print(f"   ã„´ ê²°ê³¼: {result}\n")
        
        return {"outcome": "success" if is_success else "failure", "total": total}

# 3. ë©”ì¸ ê²Œì„ ë£¨í”„
def main():
    print("\n" + "="*40)
    print("   ğŸ¤– AI ììœ¨ ì§„í–‰ TRPG (Terminal Ver.)")
    print("="*40 + "\n")

    # API Key ì…ë ¥
    api_key = input("ğŸ”‘ OpenAI API Keyë¥¼ ì…ë ¥í•˜ì„¸ìš”: ").strip()
    if not api_key:
        print("API Keyê°€ ì—†ìœ¼ë©´ ì‹¤í–‰í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
        return

    client = openai.OpenAI(api_key=api_key)
    
    # ìºë¦­í„° ìƒì„±
    print("\n[ìºë¦­í„° ìƒì„±]")
    theme = input("1. í”Œë ˆì´í•˜ê³  ì‹¶ì€ í…Œë§ˆ(ì¥ë¥´)ëŠ”? (ì˜ˆ: ì‚¬ì´ë²„í‘í¬, íŒíƒ€ì§€, ì¢€ë¹„): ")
    name = input("2. ìºë¦­í„° ì´ë¦„ì€?: ")
    print(f"\nâœ… '{name}'(ì´)ê°€ '{theme}' ì„¸ê³„ê´€ì— ì…ì¥í•©ë‹ˆë‹¤.\n")
    
    # ê¸°ë³¸ ìŠ¤íƒ¯ ì„¤ì •
    char_stats = {"í˜": 12, "ë¯¼ì²©": 14, "ì§€ëŠ¥": 14, "ìš´": 10}
    engine = RulesEngine(char_stats)
    
    # ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸
    system_prompt = f"""
    ë‹¹ì‹ ì€ '{theme}' ì„¸ê³„ê´€ì˜ TRPG ê²Œì„ ë§ˆìŠ¤í„°(GM)ì…ë‹ˆë‹¤.
    í”Œë ˆì´ì–´ '{name}'ì˜ í–‰ë™ì— ë”°ë¼ ìŠ¤í† ë¦¬ë¥¼ ì§„í–‰í•˜ì„¸ìš”.
    ì¤‘ìš”í•œ ìˆœê°„ì—ëŠ” ë°˜ë“œì‹œ 'roll_check' íˆ´ì„ ì‚¬ìš©í•˜ì—¬ íŒì •ì„ ë‚´ë¦¬ì„¸ìš”.
    ê²°ê³¼ë¥¼ í…ìŠ¤íŠ¸ë¡œ ë§í•˜ì§€ ë§ê³  íˆ´ì„ í˜¸ì¶œí•˜ì„¸ìš”.
    """
    
    messages = [{"role": "system", "content": system_prompt}]
    
    # ì²« ì¥ë©´ ìƒì„±
    print("ğŸ“– ìŠ¤í† ë¦¬ë¥¼ ìƒì„± ì¤‘ì…ë‹ˆë‹¤...")
    first_query = "ì´ì•¼ê¸°ì˜ ë„ì…ë¶€ë¥¼ ë¬˜ì‚¬í•˜ê³ , í”Œë ˆì´ì–´ì—ê²Œ í–‰ë™ì„ ë¬¼ì–´ë³´ì„¸ìš”."
    messages.append({"role": "user", "content": first_query})
    
    # ê²Œì„ ë£¨í”„
    while True:
        try:
            # AI ì‘ë‹µ ìš”ì²­
            response = client.chat.completions.create(
                model="gpt-4o",
                messages=messages,
                tools=[{
                    "type": "function",
                    "function": {
                        "name": "roll_check",
                        "description": "ìŠ¤íƒ¯ íŒì •ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.",
                        "parameters": {
                            "type": "object",
                            "properties": {
                                "stat_name": {"type": "string", "description": "íŒì •í•  ìŠ¤íƒ¯ ì´ë¦„"},
                                "difficulty_check": {"type": "integer", "description": "ë‚œì´ë„(DC)"}
                            },
                            "required": ["stat_name", "difficulty_check"]
                        }
                    }
                }]
            )
            
            msg = response.choices[0].message
            messages.append(msg)
            
            # 1. íˆ´ í˜¸ì¶œ ì²˜ë¦¬ (ì£¼ì‚¬ìœ„ êµ´ë¦¼)
            if msg.tool_calls:
                for tool in msg.tool_calls:
                    if tool.function.name == "roll_check":
                        args = json.loads(tool.function.arguments)
                        result = engine.roll_check(args["stat_name"], args["difficulty_check"])
                        
                        # íˆ´ ê²°ê³¼ ë©”ì‹œì§€ ì¶”ê°€
                        messages.append({
                            "role": "tool",
                            "tool_call_id": tool.id,
                            "name": "roll_check",
                            "content": json.dumps(result)
                        })
                
                # íˆ´ ê²°ê³¼ ë°˜ì˜í•˜ì—¬ ë‹¤ì‹œ AI ë¬˜ì‚¬ ìš”ì²­
                response = client.chat.completions.create(
                    model="gpt-4o", messages=messages
                )
                msg = response.choices[0].message
                messages.append(msg)

            # 2. GM ì„œìˆ  ì¶œë ¥
            print(f"\n[GM]: {msg.content}\n")
            
            # 3. ì‚¬ìš©ì ì…ë ¥
            user_input = input(f"[{name}]: ")
            if user_input.lower() in ["ì¢…ë£Œ", "exit", "quit"]:
                print("ê²Œì„ì„ ì¢…ë£Œí•©ë‹ˆë‹¤. ì¦ê±°ì› ìŠµë‹ˆë‹¤!")
                break
                
            messages.append({"role": "user", "content": user_input})

        except Exception as e:
            print(f"\nâŒ ì˜¤ë¥˜ ë°œìƒ: {e}")
            break

if __name__ == "__main__":
    main()
</code></pre>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 border-t border-gray-800 py-10 text-center">
        <p class="text-gray-500 text-sm">
            AI-based Autonomous TRPG System Project<br>
            Developed by Sim Gi-jun | Powered by Unity, Python, and OpenAI
        </p>
    </footer>

    <!-- Init Icons & Scripts -->
    <script>
        lucide.createIcons();

        // ì½”ë“œ ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥
        function downloadCode(filename, elementId) {
            const codeElement = document.getElementById(elementId);
            if (!codeElement) return;

            const codeText = codeElement.innerText;
            const blob = new Blob([codeText], { type: 'text/plain;charset=utf-8' });
            const url = window.URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.style.display = 'none';
            a.href = url;
            a.download = filename;
            
            document.body.appendChild(a);
            a.click();
            
            window.URL.revokeObjectURL(url);
            document.body.removeChild(a);
        }
    </script>
</body>
</html>
